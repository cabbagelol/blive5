<!--
    * 简介历史
-->

<div class="blive-history-window" (click)="close($event)">
    <div class="blive-history-window-box">
        <nz-layout style="height: 100%;">
            <nz-header style="color: #fff;text-align: center; background: #1890ff;">
                历史
            </nz-header>
            <nz-layout>
                <nz-card>
                    <div nz-row>
                        <div nz-col nzMd="16">
                            自动保存
                        </div>
                        <div nz-col nzMd="8" style="text-align: right">
                            <nz-switch [ngModel]="true" nzCheckedChildren="开" nzUnCheckedChildren="关"
                                       disabled></nz-switch>
                        </div>
                    </div>
                </nz-card>

                <!--S 列表-->
                <nz-content class="blive-history-window-overflow">
                    <div style="padding: 30px;">
                        <nz-page-header>
                            <nz-page-header-extra>
                                <a nz-dropdown [nzDropdownMenu]="menu">
                                    更多 <i nz-icon nzType="ellipsis" nzTheme="outline"></i>
                                </a>
                                <nz-dropdown-menu #menu="nzDropdownMenu">
                                    <ul nz-menu>
                                        <li nz-menu-item>导出所有历史列表 <nz-tag [nzColor]="'#999'">不可用</nz-tag></li>
                                        <li nz-menu-item>导出选中的简介 <nz-tag [nzColor]="'#999'">不可用</nz-tag></li>
                                        <li nz-menu-item>导入 <nz-tag [nzColor]="'#999'">不可用</nz-tag></li>
                                    </ul>
                                </nz-dropdown-menu>
                            </nz-page-header-extra>
                            <nz-page-header-content>
                                <nz-row nzType="flex">
                                    <nz-statistic nzTitle="剩余可用储存" nzPrefix="份"
                                                  nzValue="{{20 - listLength}}"></nz-statistic>
                                    <nz-statistic nzTitle="总量" [nzValue]="568.08" nzPrefix="kb"
                                                  style="margin: 0 32px"></nz-statistic>
                                </nz-row>
                            </nz-page-header-content>
                        </nz-page-header>

                        <nz-divider></nz-divider>

                        <!--<div class="operate">-->
                        <!--<button-->
                        <!--nz-button-->
                        <!--[disabled]="numberOfChecked === 0"-->
                        <!--[nzType]="'primary'"-->
                        <!--[nzLoading]="isOperating"-->
                        <!--(click)="operateData()"-->
                        <!--&gt;-->
                        <!--Reload-->
                        <!--</button>-->
                        <!--<span *ngIf="numberOfChecked">Selected {{ numberOfChecked }} items</span>-->
                        <!--</div>-->
                        <nz-table
                            #rowSelectionTable
                            nzShowPagination
                            nzShowSizeChanger
                            [nzData]="historyList"
                            (nzCurrentPageDataChange)="currentPageDataChange($event)">
                            <thead>
                            <tr>
                                <th
                                        nzShowCheckbox
                                        [(nzChecked)]="isAllDisplayDataChecked"
                                        [nzIndeterminate]="isIndeterminate"
                                        (nzCheckedChange)="checkAll($event)"></th>
                                <th>简要信息</th>
                                <th>操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let data of historyList">
                                <td
                                        nzShowCheckbox
                                        [(nzChecked)]="mapOfCheckedId[data.id]"
                                        [nzDisabled]="data.disabled"
                                        (nzCheckedChange)="refreshStatus()"
                                ></td>
                                <td>
                                    <nz-descriptions nzLayout="vertical">
                                        <nz-descriptions-item nzTitle="名称">
                                            <p nz-paragraph nzEditable [nzEllipsisRows]="1" [nzEllipsis]="true" [(nzContent)]="data.name" (nzContentChange)="onUpDataList(data)"></p>
                                        </nz-descriptions-item>
                                        <nz-descriptions-item nzTitle="原始模板"> 未知</nz-descriptions-item>
                                        <nz-descriptions-item nzTitle="容量">
                                            <nz-progress [nzPercent]="(19.53 / (data.html.toString().length / 1024)).toFixed(2)" style="width: 200px; display: block"></nz-progress>
                                        </nz-descriptions-item>
                                        <nz-descriptions-item nzTitle="系统序列">
                                            <span nz-tooltip
                                                  nzTooltipTitle="这是blive生成的简介id,它是由什么组成并不重要,得益于此id工具才能通过它加载简介数据">{{data.id}}</span>
                                        </nz-descriptions-item>
                                        <nz-descriptions-item nzTitle="创建时间">{{ data.time }}</nz-descriptions-item>
                                    </nz-descriptions>
                                </td>
                                <td style="width: 200px">
                                    <button nz-button nzType="primary" (click)="open(data)">使用</button>
                                    <nz-divider nzType="vertical"></nz-divider>
                                    <button nz-popconfirm
                                            nzPopconfirmTitle="删除该简介"
                                            nzPopconfirmPlacement="bottom" nz-button nzType="danger" (nzOnConfirm)="delete(data)">删除</button>
                                </td>
                            </tr>
                            </tbody>
                        </nz-table>
                    </div>
                </nz-content>
                <!--E 列表-->
            </nz-layout>
        </nz-layout>
    </div>
</div>

